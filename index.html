<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6í•™ë…„ ìš°ë¦¬ë°˜ í™ˆí˜ì´ì§€</title>
    <style>
        :root {
            --primary: #4ade80;
            /* ë°ì€ ì´ˆë¡ */
            --primary-dark: #22c55e;
            --accent: #facc15;
            /* ë…¸ë€ìƒ‰ ê°•ì¡° */
            --bg-gradient: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.3);
            --text-main: #166534;
            --text-sub: #15803d;
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        body {
            font-family: 'Inter', 'Jua', sans-serif;
            background: var(--bg-gradient);
            background-attachment: fixed;
            margin: 0;
            padding: 0;
            color: var(--text-main);
            min-height: 100vh;
        }

        header {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid var(--glass-border);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        header h1 {
            margin: 0;
            font-size: 1.8rem;
            color: var(--primary-dark);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.05);
        }

        nav {
            background: var(--glass-bg);
            backdrop-filter: blur(5px);
            padding: 10px 0;
            text-align: center;
            border-bottom: 1px solid var(--glass-border);
            overflow-x: auto;
            white-space: nowrap;
        }

        nav a {
            display: inline-flex;
            align-items: center;
            color: var(--text-sub);
            text-align: center;
            padding: 10px 18px;
            text-decoration: none;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            border-radius: 20px;
            margin: 0 5px;
        }

        nav a:hover,
        nav a.active-link {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 222, 128, 0.3);
        }

        .container {
            padding: 20px;
            max-width: 900px;
            margin: 20px auto;
        }

        .section {
            display: none;
            animation: slideUp 0.6s ease-out;
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: 24px;
            border: 1px solid var(--glass-border);
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .section.active {
            display: block;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h2 {
            color: var(--primary-dark);
            font-size: 1.5rem;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h2::after {
            content: '';
            flex: 1;
            height: 2px;
            background: linear-gradient(to right, var(--primary), transparent);
        }

        .card {
            background: white;
            border-radius: 18px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #f0f0f0;
            transition: transform 0.3s;
        }

        .card:hover {
            transform: scale(1.02);
        }

        .notice-item {
            border-left: 6px solid var(--primary);
            background: #f9fffb;
        }

        .notice-date {
            color: #888;
            font-size: 0.85em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        input[type="text"],
        input[type="password"],
        textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            box-sizing: border-box;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.8);
            transition: border-color 0.3s;
        }

        input:focus {
            border-color: var(--primary);
            outline: none;
            background: white;
        }

        button {
            background: var(--primary);
            color: white;
            padding: 14px 24px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        button:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .grid-layout {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .profile-badge {
            display: inline-block;
            padding: 4px 12px;
            background: var(--accent);
            color: #854d0e;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 8px;
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Jua&display=swap"
        rel="stylesheet">
</head>

<body>

    <header>
        <h1>ğŸ« 6í•™ë…„ ìš°ë¦¬ë°˜ í™ˆí˜ì´ì§€</h1>
    </header>

    <nav id="main-nav">
        <a href="#" onclick="showSection('home')" class="active-link">ğŸ  í™ˆ</a>
        <a href="#" id="menu-notice" onclick="showSection('notice')" style="display:none;">ğŸ“¢ ê°€ì •í†µì‹ ë¬¸</a>
        <a href="#" id="menu-timetable" onclick="showSection('timetable')" style="display:none;">ğŸ“… ì‹œê°„í‘œ</a>
        <a href="#" id="menu-dailylog" onclick="showSection('dailylog')" style="display:none;">ğŸ“ ì•Œë¦¼ì¥</a>
        <a href="#" id="menu-gallery" onclick="showSection('gallery')" style="display:none;">ğŸ–¼ï¸ ê°¤ëŸ¬ë¦¬</a>
        <a href="#" id="menu-profile" onclick="showSection('profile')" style="display:none;">ğŸ‘¤ í”„ë¡œí•„</a>
        <a href="#" id="menu-login" onclick="showSection('login')">ğŸ”‘ ë¡œê·¸ì¸</a>
    </nav>

    <div class="container">
        <div id="loading-spinner" class="spinner"></div>

        <!-- í™ˆ í™”ë©´ -->
        <div id="home" class="section active">
            <h2>í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‘‹</h2>
            <div class="card welcome-msg" style="text-align: center;">
                <p style="font-size: 1.2rem; margin-bottom: 10px;">ìš°ë¦¬ë°˜ ì¹œêµ¬ë“¤ì„ ìœ„í•œ <strong>ì¦ê±°ìš´ ì˜¨ë¼ì¸ ê³µê°„</strong>ì…ë‹ˆë‹¤.</p>
                <p>í•™êµ ì†Œì‹ë„ í™•ì¸í•˜ê³ , ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ì†Œì¤‘í•œ ì¶”ì–µì„ ë§Œë“¤ì–´ë´ìš”!</p>
            </div>
            <div class="grid-layout">
                <div class="card">
                    <h3>ğŸ“Œ ì˜¤ëŠ˜ì˜ ëª…ì–¸</h3>
                    <p>"ì–´ì œë³´ë‹¤ ë” ë‚˜ì€ ì˜¤ëŠ˜ì„ ë§Œë“œëŠ” ë‹¹ì‹ ì„ ì‘ì›í•©ë‹ˆë‹¤."</p>
                </div>
                <div class="card">
                    <h3>ğŸŒ¤ï¸ ì˜¤ëŠ˜ì˜ ë‚ ì”¨</h3>
                    <p>ì¤€ë¹„ë¬¼: ê¸ì •ì ì¸ ë§ˆìŒê°€ì§ âœ¨</p>
                </div>
            </div>
        </div>

        <!-- ê°€ì •í†µì‹ ë¬¸ í™”ë©´ -->
        <div id="notice" class="section">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h2>ğŸ“¢ ê°€ì •í†µì‹ ë¬¸</h2>
                <button id="admin-add-notice"
                    style="display: none; width: auto; padding: 8px 16px; font-size: 0.9rem;">+ ìƒˆ ê³µì§€ ì‘ì„±</button>
            </div>
            <div id="notice-list">
                <div class="card notice-item">
                    <h3>[í•„ë…] ë‹¤ìŒ ì£¼ í˜„ì¥ì²´í—˜í•™ìŠµ ì•ˆë‚´</h3>
                    <p>ë‹¤ìŒ ì£¼ ê¸ˆìš”ì¼ì€ í˜„ì¥ì²´í—˜í•™ìŠµ ê°€ëŠ” ë‚ ì…ë‹ˆë‹¤. ë„ì‹œë½ê³¼ ë¬¼ì„ ê¼­ ì±™ê²¨ì˜¤ì„¸ìš”!</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="notice-date">ğŸ“… 2024-05-20</span>
                        <span class="profile-badge">ì¤‘ìš”</span>
                    </div>
                </div>
                <div class="card notice-item">
                    <h3>ì¤€ë¹„ë¬¼: ë¯¸ìˆ  ì‹œê°„ ìƒ‰ì¢…ì´</h3>
                    <p>ë‚´ì¼ ë¯¸ìˆ  ì‹œê°„ì—ëŠ” ìƒ‰ì¢…ì´ì™€ í’€, ê°€ìœ„ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="notice-date">ğŸ“… 2024-05-18</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì‹œê°„í‘œ í™”ë©´ -->
        <div id="timetable" class="section">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h2>ğŸ“… ì˜¤ëŠ˜ ì‹œê°„í‘œ</h2>
                <button id="admin-edit-timetable"
                    style="display: none; width: auto; padding: 8px 16px; font-size: 0.9rem;">âœï¸ ìˆ˜ì •</button>
            </div>
            <div class="card">
                <table style="width: 100%; border-collapse: collapse; text-align: center;">
                    <tr style="background: #f0fdf4;">
                        <th style="padding: 10px; border-bottom: 2px solid #bbf7d0;">êµì‹œ</th>
                        <th style="padding: 10px; border-bottom: 2px solid #bbf7d0;">ê³¼ëª©</th>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">1êµì‹œ</td>
                        <td style="font-weight: 600;">êµ­ì–´</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">2êµì‹œ</td>
                        <td style="font-weight: 600;">ìˆ˜í•™</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">3êµì‹œ</td>
                        <td style="font-weight: 600;">ì²´ìœ¡</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">4êµì‹œ</td>
                        <td style="font-weight: 600;">ì‚¬íšŒ</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">ì ì‹¬</td>
                        <td style="color: #ef4444; font-weight: bold;">ë§›ìˆëŠ” ê¸‰ì‹ ì‹œê°„ ğŸ±</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">5êµì‹œ</td>
                        <td style="font-weight: 600;">ë¯¸ìˆ </td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">6êµì‹œ</td>
                        <td style="font-weight: 600;">ë¯¸ìˆ </td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- ì•Œë¦¼ì¥ í™”ë©´ -->
        <div id="dailylog" class="section">
            <h2>ğŸ“ ì˜¤ëŠ˜ì˜ ì•Œë¦¼ì¥</h2>
            <div class="card" style="border-left: 6px solid var(--accent);">
                <ul style="line-height: 2; padding-left: 20px;">
                    <li>êµ­ì–´ ìˆ™ì œ: 'ë‚˜ì˜ ê¿ˆ' ê¸€ì“°ê¸° ì™„ì„±í•´ì˜¤ê¸°</li>
                    <li>ìˆ˜í•™ ìµí˜ì±… 45~48ìª½ í’€ì–´ë³´ê¸°</li>
                    <li>ì¤€ë¹„ë¬¼: ë‚´ì¼ ê³¼í•™ ì‹¤ë¬´ ìˆ˜ì—…ìš© íˆ¬ëª… ì»µ 2ê°œ</li>
                    <li>ê±´ê°•: ê°œì¸ ìœ„ìƒ ì² ì €íˆ, ì† ì”»ê¸° ìƒí™œí™”!</li>
                </ul>
                <p style="text-align: right; color: #888; margin-top: 10px;">ì‘ì„±ì: ë‹´ì„ ì„ ìƒë‹˜</p>
            </div>
        </div>

        <!-- ê°¤ëŸ¬ë¦¬ í™”ë©´ -->
        <div id="gallery" class="section">
            <h2>ğŸ–¼ï¸ ìš°ë¦¬ë°˜ ê°¤ëŸ¬ë¦¬</h2>
            <div class="grid-layout">
                <div class="card" style="padding: 5px;">
                    <div
                        style="aspect-ratio: 1; background: #eee; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                        <span style="color: #aaa;">ì´ë¯¸ì§€ ì¤€ë¹„ ì¤‘</span>
                    </div>
                    <p style="padding: 10px 5px; margin: 0; font-weight: 600;">ë´„ë§ì´ ì†Œí’ ğŸŒ¸</p>
                </div>
                <div class="card" style="padding: 5px;">
                    <div
                        style="aspect-ratio: 1; background: #eee; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                        <span style="color: #aaa;">ì´ë¯¸ì§€ ì¤€ë¹„ ì¤‘</span>
                    </div>
                    <p style="padding: 10px 5px; margin: 0; font-weight: 600;">ì²´ìœ¡ëŒ€íšŒ ì‘ì›ì „ ğŸ“£</p>
                </div>
            </div>
        </div>

        <!-- í”„ë¡œí•„ í™”ë©´ -->
        <div id="profile" class="section">
            <h2>ğŸ‘¤ ë‚´ í”„ë¡œí•„</h2>
            <div class="card">
                <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                    <div
                        style="width: 80px; height: 80px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white;">
                        ğŸ‘¤</div>
                    <div>
                        <h3 id="profile-email-display" style="margin: 0;">guest@school.com</h3>
                        <p id="profile-role-display" style="margin: 5px 0 0 0; color: #666;">í•™ìƒ</p>
                    </div>
                </div>
                <div class="form-group">
                    <label>ë‹‰ë„¤ì„ ë³€ê²½</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="profile-nickname" placeholder="ìƒˆ ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”">
                        <button onclick="updateNickname()" style="width: auto; white-space: nowrap;">ë³€ê²½</button>
                    </div>
                </div>
                <hr style="border: 0; border-top: 1px solid #eee; margin: 25px 0;">
                <button onclick="handleLogout()" style="background: #f87171;">ğŸšª ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>

        <!-- ë¡œê·¸ì¸ í™”ë©´ -->
        <div id="login" class="section">
            <h2>ğŸ”‘ ë¡œê·¸ì¸</h2>
            <div class="card">
                <div class="form-group">
                    <label for="login-id">ì´ë©”ì¼</label>
                    <input type="text" id="login-id" placeholder="school@email.com">
                </div>
                <div class="form-group">
                    <label for="login-pw">ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="login-pw" placeholder="ë¹„ë°€ë²ˆí˜¸">
                </div>
                <button onclick="handleLogin()">ë¡œê·¸ì¸ í•˜ê¸°</button>
                <div style="text-align: center; margin: 20px 0; color: #888;">ë˜ëŠ”</div>
                <button onclick="handleGoogleLogin()"
                    style="background: white; color: #444; border: 1px solid #ddd; display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="20"
                        alt="Google"> êµ¬ê¸€ë¡œ ì‹œì‘í•˜ê¸°
                </button>
                <p style="text-align: center; margin-top: 20px;">ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <a href="#" onclick="showSection('signup')"
                        style="color: var(--primary-dark); font-weight: bold;">íšŒì›ê°€ì…</a></p>
            </div>
        </div>

        <!-- íšŒì›ê°€ì… í™”ë©´ -->
        <div id="signup" class="section">
            <h2>ğŸ“ íšŒì›ê°€ì…</h2>
            <div class="card">
                <div class="form-group">
                    <label for="signup-name">ì´ë¦„</label>
                    <input type="text" id="signup-name" placeholder="ì‹¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                <div class="form-group">
                    <label for="signup-id">ì´ë©”ì¼</label>
                    <input type="text" id="signup-id" placeholder="school@email.com">
                </div>
                <div class="form-group">
                    <label for="signup-pw">ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="signup-pw" placeholder="6ìë¦¬ ì´ìƒ ë¹„ë°€ë²ˆí˜¸">
                </div>
                <button onclick="handleSignup()">ê°€ì…í•˜ê¸°</button>
                <p style="text-align: center; margin-top: 20px;"><a href="#" onclick="showSection('login')"
                        style="color: #888; text-decoration: none;">â† ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a></p>
            </div>
        </div>
    </div>

    <script type="module">
        // Firebase SDK ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°€ì ¸ì˜¤ê¸° (CDN ë°©ì‹)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-analytics.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyA9eZAgo2rPxpXj4SarzPbEUsJ7jNYxoag",
            authDomain: "hompage-9980d.firebaseapp.com",
            projectId: "hompage-9980d",
            storageBucket: "hompage-9980d.firebasestorage.app",
            messagingSenderId: "197798407848",
            appId: "1:197798407848:web:3d54464015d4ea13f3dc9d",
            measurementId: "G-YCGS3L77HB"
        };

        // Firebase ì´ˆê¸°í™”
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ë©”ë‰´ ì œì–´)
        function updateUI(user) {
            const menus = {
                notice: document.getElementById('menu-notice'),
                timetable: document.getElementById('menu-timetable'),
                dailylog: document.getElementById('menu-dailylog'),
                gallery: document.getElementById('menu-gallery'),
                profile: document.getElementById('menu-profile'),
                login: document.getElementById('menu-login')
            };
            const adminButtons = {
                notice: document.getElementById('admin-add-notice'),
                timetable: document.getElementById('admin-edit-timetable')
            };
            const profileEmail = document.getElementById('profile-email-display');
            const profileRole = document.getElementById('profile-role-display');
            const profileNickname = document.getElementById('profile-nickname');

            if (user) {
                // ë¡œê·¸ì¸ ìƒíƒœì¼ ë•Œ
                const isAdmin = user.email === 'admin' || user.email?.includes('teacher');

                menus.notice.style.display = 'inline-flex';
                menus.timetable.style.display = 'inline-flex';
                menus.dailylog.style.display = 'inline-flex';
                menus.gallery.style.display = 'inline-flex';
                menus.profile.style.display = 'inline-flex';
                menus.login.style.display = 'none';

                // ê´€ë¦¬ì ë²„íŠ¼ ì œì–´
                adminButtons.notice.style.display = isAdmin ? 'block' : 'none';
                adminButtons.timetable.style.display = isAdmin ? 'block' : 'none';

                profileEmail.textContent = user.email || 'ì‚¬ìš©ì';
                profileRole.textContent = isAdmin ? 'ì„ ìƒë‹˜ ğŸ‘¨â€ğŸ«' : 'ìš°ë¦¬ë°˜ í•™ìƒ ğŸ’';
                profileNickname.value = user.displayName || '';
            } else {
                // ë¡œê·¸ì•„ì›ƒ ìƒíƒœì¼ ë•Œ
                menus.notice.style.display = 'none';
                menus.timetable.style.display = 'none';
                menus.dailylog.style.display = 'none';
                menus.gallery.style.display = 'none';
                menus.profile.style.display = 'none';
                menus.login.style.display = 'inline-flex';

                adminButtons.notice.style.display = 'none';
                adminButtons.timetable.style.display = 'none';

                // ë§Œì•½ í˜„ì¬ ë³´ê³  ìˆëŠ” í™”ë©´ì´ ê¶Œí•œì´ í•„ìš”í•œ í™”ë©´ì´ë¼ë©´ í™ˆìœ¼ë¡œ ì´ë™
                const activeSection = document.querySelector('.section.active');
                if (activeSection && !['home', 'login', 'signup'].includes(activeSection.id)) {
                    showSection('home');
                }
            }
        }

        // Firebase ì¸ì¦ ìƒíƒœ ë³€í™” ê°ì§€
        onAuthStateChanged(auth, (user) => {
            updateUI(user);
        });

        // ë¡œë”© ìŠ¤í”¼ë„ˆ ì œì–´ìš©
        function setLoader(isLoading) {
            const spinner = document.getElementById('loading-spinner');
            spinner.style.display = isLoading ? 'block' : 'none';
        }

        // ë‹‰ë„¤ì„ ë³€ê²½ í•¨ìˆ˜
        window.updateNickname = async function () {
            const newName = document.getElementById('profile-nickname').value;
            if (!newName) return alert("ë³€ê²½í•  ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");

            setLoader(true);
            try {
                // ì‹¤ì œ ê³ ë„í™” ì‹œ updateProfile(auth.currentUser, { displayName: newName }) ì‚¬ìš©
                setTimeout(() => {
                    alert("ë‹‰ë„¤ì„ì´ '" + newName + "'ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤! (í˜„ì¬ ì„¸ì…˜ì—ë§Œ ë°˜ì˜)");
                    setLoader(false);
                }, 1000);
            } catch (error) {
                alert("ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + error.message);
                setLoader(false);
            }
        };

        // ì „ì—­ í•¨ìˆ˜ë¡œ ë“±ë¡ (HTML ë²„íŠ¼ì—ì„œ í˜¸ì¶œ ê°€ëŠ¥í•˜ë„ë¡ window ê°ì²´ì— í• ë‹¹)
        window.handleSignup = async function () {
            const email = document.getElementById('signup-id').value;
            const pw = document.getElementById('signup-pw').value;
            if (!email || !pw) return alert("ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");

            setLoader(true);
            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, pw);
                alert("ê°€ì… ì„±ê³µ! í™˜ì˜í•©ë‹ˆë‹¤.");
                showSection('home');
            } catch (error) {
                alert("ê°€ì… ì‹¤íŒ¨: " + (error.code === 'auth/email-already-in-use' ? 'ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤.' : error.message));
            } finally {
                setLoader(false);
            }
        };

        window.handleLogin = async function () {
            const email = document.getElementById('login-id').value;
            const pw = document.getElementById('login-pw').value;

            if (email === 'admin' && pw === '1234') {
                alert('ê´€ë¦¬ìë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!');
                updateUI({ email: 'ê´€ë¦¬ì(Admin)' });
                showSection('home');
                return;
            }

            setLoader(true);
            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, pw);
                alert("ë°˜ê°€ì›Œìš”! ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
                showSection('home');
            } catch (error) {
                alert("ë¡œê·¸ì¸ ì‹¤íŒ¨: ì´ë©”ì¼ì´ë‚˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");
            } finally {
                setLoader(false);
            }
        };

        window.handleGoogleLogin = async function () {
            const provider = new GoogleAuthProvider();
            setLoader(true);
            try {
                const result = await signInWithPopup(auth, provider);
                alert("êµ¬ê¸€ ë¡œê·¸ì¸ ì„±ê³µ! " + result.user.displayName + "ë‹˜ ì•ˆë…•í•˜ì„¸ìš”.");
                showSection('home');
            } catch (error) {
                alert("êµ¬ê¸€ ë¡œê·¸ì¸ ì‹¤íŒ¨: " + error.message);
            } finally {
                setLoader(false);
            }
        };

        // ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
        window.handleLogout = async function () {
            if (!confirm("ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
            try {
                await signOut(auth);
                alert("ì •ìƒì ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.");
                updateUI(null);
                showSection('home');
            } catch (error) {
                console.error("ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:", error);
                updateUI(null);
                showSection('home');
            }
        };
    </script>

    <script>
        // ë©”ë‰´ í´ë¦­ ì‹œ í•´ë‹¹ ì„¹ì…˜ë§Œ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜
        function showSection(sectionId) {
            // ì„¹ì…˜ í™œì„±í™”
            const sections = document.getElementsByClassName('section');
            for (let i = 0; i < sections.length; i++) {
                sections[i].classList.remove('active');
            }
            document.getElementById(sectionId).classList.add('active');

            // ë„¤ë¹„ê²Œì´ì…˜ ë§í¬ í™œì„±í™” í‘œì‹œ
            const navLinks = document.querySelectorAll('#main-nav a');
            navLinks.forEach(link => {
                link.classList.remove('active-link');
                // onclick ë¬¸ìì—´ì—ì„œ sectionId ì¶”ì¶œ (ê°„ë‹¨í•œ ë¹„êµë¥¼ ìœ„í•´)
                if (link.getAttribute('onclick').includes(`'${sectionId}'`)) {
                    link.classList.add('active-link');
                }
            });

            // í™”ë©´ ì œì¼ ìœ„ë¡œ ìŠ¤í¬ë¡¤
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>

</body>

</html>